<div class="addContainer">
  <div class="modalHeader">
    <div class="avatarDetails">
      <div class="modalTitle">{{dialogTitle}}</div>
    </div>
    <button mat-icon-button mat-dialog-close class="modal-close-button" aria-label="Close dialog" type="button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div mat-dialog-content>
    <form class="register-form m-4" [formGroup]="brandForm" (ngSubmit)="submit()">

      <!-- Brand Information Section -->
      <h4 class="mt-2 mb-3">Brand Information</h4>
      <div class="row">
        <!-- Brand Name -->
        <div class="col-xl-6 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Brand Name</mat-label>
            <input matInput formControlName="name" required>
            <mat-icon matSuffix>branding_watermark</mat-icon>
            <mat-error *ngIf="brandForm.get('name')?.hasError('required')">Brand name is required</mat-error>
            <mat-error *ngIf="brandForm.get('name')?.hasError('minlength')">Brand name must be at least 2 characters</mat-error>
          </mat-form-field>
        </div>

        <!-- Brand Slug -->
        <div class="col-xl-6 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Brand Slug</mat-label>
            <input matInput formControlName="slug" required>
            <mat-icon matSuffix>link</mat-icon>
            <mat-error *ngIf="brandForm.get('slug')?.hasError('required')">Slug is required</mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Brand Description -->
      <div class="row">
        <div class="col-xl-12 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Brand Description</mat-label>
            <textarea matInput formControlName="description" rows="3" 
                     placeholder="Enter brand description..."></textarea>
            <mat-icon matSuffix>description</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Logo Upload Section -->
      <h4 class="mt-4 mb-3">Brand Logo</h4>
      <div class="row">
        <div class="col-xl-12 mb-3">
          <div class="file-drop-area" 
               [class.dragging]="isDragging"
               (dragover)="onDragOver($event)"
               (dragleave)="onDragLeave($event)"
               (drop)="onDrop($event)"
               (click)="triggerFileInput()">
            <input #fileInput type="file" id="uploadLogo" class="file-input" 
                   accept="image/*" (change)="onFileSelected($event)">
            <div class="file-msg">
              <mat-icon class="file-icon">cloud_upload</mat-icon>
              <span>Drop brand logo here or click to browse</span>
            </div>
          </div>
          <small class="text-muted">Supported formats: JPG, PNG, GIF, WebP. Maximum file size: 2MB</small>
        </div>
      </div>

      <!-- Logo Preview -->
      <div class="row" *ngIf="logoPreview">
        <div class="col-xl-12 mb-3">
          <h5>Logo Preview</h5>
          <div class="logo-preview-container">
            <div class="logo-preview-item">
              <img [src]="logoPreview" alt="Brand logo preview">
              <button type="button" class="remove-logo-btn" (click)="removeLogo()" mat-icon-button>
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Brand Settings -->
      <h4 class="mt-4 mb-3">Brand Settings</h4>
      <div class="row">
        <!-- Sort Order -->
        <div class="col-xl-4 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Sort Order</mat-label>
            <input matInput type="number" formControlName="sort_order" min="0">
            <mat-icon matSuffix>sort</mat-icon>
            <mat-error *ngIf="brandForm.get('sort_order')?.hasError('min')">Sort order must be positive</mat-error>
          </mat-form-field>
        </div>

        <!-- Featured Status -->
        <div class="col-xl-4 mb-2 d-flex align-items-center">
          <mat-checkbox formControlName="is_featured" class="mt-3">
            Featured Brand
          </mat-checkbox>
        </div>

        <!-- Active Status -->
        <div class="col-xl-4 mb-2 d-flex align-items-center">
          <mat-checkbox formControlName="is_active" class="mt-3">
            Active Brand
          </mat-checkbox>
        </div>
      </div>

      <!-- SEO Information -->
      <h4 class="mt-4 mb-3">SEO Information</h4>
      <div class="row">
        <div class="col-xl-12 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>SEO Title</mat-label>
            <input matInput formControlName="meta_title" 
                   placeholder="Optimized title for search engines">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-xl-12 mb-2">
          <mat-form-field appearance="outline" class="example-full-width">
            <mat-label>SEO Description</mat-label>
            <textarea matInput formControlName="meta_description" rows="2"
                     placeholder="Meta description for search engines"></textarea>
            <mat-icon matSuffix>description</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <!-- Form Buttons -->
      <div class="row mt-4">
        <div class="col-xl-12 mb-2">
          <div class="example-button-row">
            <button mat-flat-button color="primary" type="submit" [disabled]="!brandForm.valid">
              {{ action === 'edit' ? 'Update Brand' : 'Add Brand' }}
            </button>
            <button mat-flat-button mat-dialog-close class="formCancelBtn" tabindex="-1" type="button">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>