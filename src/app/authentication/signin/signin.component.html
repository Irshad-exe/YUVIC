<div class="auth-container">
  <div class="row auth-main">
    <!-- Left Brand Panel with YUVIC Logo -->
    <div class="col-sm-6 px-0 d-none d-sm-block">
      <div class="left-panel">
        <div class="brand-section">
          <div class="logo-container">
            <img src="../../../../assets/images/yuvic-logos/Yuvic_Vertical_Light_Logo-8.png" 
                 alt="YUVIC Logo" 
                 class="yuvic-vertical-logo">
          </div>
          <div class="brand-content">
            <div class="brand-text">
              <h1 class="brand-tagline">FROM DULL TO DIVINE</h1>
              <p class="brand-philosophy">
                True Radiance Is Not Borrowed<br>
                It Is Revealed Through Care, Purity, And Nourishment
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Form Panel -->
    <div class="col-sm-6 auth-form-section">
      <div class="form-section">
        <div class="auth-wrapper">
          <!-- Mobile Logo -->
          <div class="mobile-logo d-sm-none">
            <div class="mobile-logo-container">
              <img src="../../../../assets/images/yuvic-logos/Yuvic_Instagram_And_Facebook_Logo_100.jpg" 
                   alt="YUVIC" 
                   class="yuvic-horizontal-logo">
            </div>
          </div>
          
          <div class="welcome-section">
            <h4 class="welcome-msg">Welcome to YUVIK</h4>
          </div>

          <h6 class="login-title">Sign in</h6>
          
          <form class="validate-form" [formGroup]="authForm" (ngSubmit)="onSubmit(authForm.value)">
            <!-- Show password login by default or when loginMode is 'password' -->
            <ng-container *ngIf="!loginMode || loginMode === 'password'">
               <div class="row">
                <mat-form-field class="example-full-width" appearance="outline">
                  <mat-label>Username</mat-label>
                  <input matInput formControlName="username" />
                  <mat-icon class="material-icons-outlined" matSuffix>person</mat-icon>
                </mat-form-field>
              </div>

              <div class="row">
                <mat-form-field class="example-full-width" appearance="outline">
                  <mat-label>Password</mat-label>
                  <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" />
                  <mat-icon class="material-icons-outlined pwd-toggle" matSuffix (click)="hide = !hide">
                    {{ hide ? 'visibility_off' : 'visibility' }}
                  </mat-icon>
                </mat-form-field>
              </div>
              
             
            </ng-container>

            <ng-container *ngIf="loginMode === 'otp'">
               <div class="row">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" type="email" />
                  <mat-icon class="material-icons-outlined" matSuffix>email</mat-icon>
                </mat-form-field>
              </div>

              <div class="row" *ngIf="otpSent">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Enter OTP</mat-label>
                  <input matInput formControlName="otp" maxlength="6" />
                </mat-form-field>

                <div class="otp-timer">
                  <small *ngIf="timeLeft > 0" class="time">
                    <span class="rotate">⌛</span> {{ timeLeft }}s
                  </small>
                  <button mat-button class="resend-btn" type="button" (click)="resendOtp()"
                    [disabled]="timeLeft > 0 || loading">
                    Resend OTP
                  </button>
                </div>
              </div>
            </ng-container>

            <div *ngIf="error" class="alert alert-danger error-message">{{ error }}</div>

            <div class="action-buttons">
              <div class="primary-actions">
                <!-- Primary password login button (also default when loginMode is not set) -->
                <button *ngIf="!loginMode || loginMode === 'password'" mat-flat-button color="primary" class="login-btn"
                  [disabled]="!authForm.get('username')?.valid || !authForm.get('password')?.valid || loading"
                  type="submit">
                  Login
                </button>

                <button *ngIf="loginMode === 'otp' && !otpSent" mat-flat-button color="primary" class="send-otp-btn"
                  type="button" (click)="sendOtp()"
                  [disabled]="!authForm.get('email')?.valid || loading">
                  Send OTP
                </button>

                <button *ngIf="loginMode === 'otp' && otpSent" mat-flat-button color="primary" class="verify-otp-btn"
                  type="submit"
                  [disabled]="!authForm.get('otp')?.valid || loading">
                  Login
                </button>
              </div>

              <div class="secondary-actions">
               

                <button *ngIf="loginMode === 'otp' && !otpSent" mat-stroked-button color="accent" class="switch-mode-btn"
                  type="button" (click)="loginMode = 'password'; otpSent = false; authForm.get('otp')?.reset()">
                  Login With Password
                </button>
              </div>
            </div>
          </form>

          <!-- Footer -->
          <div class="footer">
            <p class="copyright">© 2024 YUVIC. All rights reserved.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>